--===================================================================================
--             Name:    GROUP Functions
-------------------------------------------------------------------------------------
--      Description:    Collection of GROUP Functions
--===================================================================================






-------------------------------------------------------------------------------------
--      Description:    selection changed event
-------------------------------------------------------------------------------------
--        Parameter:    
-------------------------------------------------------------------------------------
--           Return:    
-------------------------------------------------------------------------------------
function Group.SelectionChanged(index)

    Data.selectedGroupIndex = index

    for key, group in ipairs(Group) do

        group:SelectionChanged()

    end

end


-------------------------------------------------------------------------------------
--      Description:    enable/disable group
-------------------------------------------------------------------------------------
--        Parameter:    index
--                      enable
-------------------------------------------------------------------------------------
--           Return:    
-------------------------------------------------------------------------------------
function Group.SelectionChanged(index, enable)

    Data.group[index].enabled = enable

    if enable == Action.Add then

        Group.Open(index)

    else

        Group.Close(index)

    end

end


-------------------------------------------------------------------------------------
--      Description:    close group
-------------------------------------------------------------------------------------
--        Parameter:    index
-------------------------------------------------------------------------------------
--           Return:    
-------------------------------------------------------------------------------------
function Group.Close(index)

    if Group[index] ~= nil then
        Group[index]:Finish()
    end

    Group[index] = nil

end


-------------------------------------------------------------------------------------
--      Description:    open group
-------------------------------------------------------------------------------------
--        Parameter:    index
-------------------------------------------------------------------------------------
--           Return:    
-------------------------------------------------------------------------------------
function Group.Open(index)

    if Group[index] == nil then
        Group[index] =  Group.Constructor[ Data.group[index].type ](index, Data.group[index])
    end

end


-------------------------------------------------------------------------------------
--      Description:    open all groups
-------------------------------------------------------------------------------------
--        Parameter:    
-------------------------------------------------------------------------------------
--           Return:    
-------------------------------------------------------------------------------------
function Group.OpenAll()

    for index, groupData in ipairs(Data.group) do

        if groupData.enabled == true then

            if Group[index] ~= nil then
                Group.Close(index)
            end
            
            Group.Open(index)

        end

    end

end